<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AC Parceria - Portal de Transporte</title>

  <!-- PWA meta -->
  <meta name="theme-color" content="#b00000" />
  <link rel="manifest" href="manifest.json">

  <style>
    :root{
      --primary: #b00000;
      --primary-dark: #8a0000;
      --bg: #ffffff;
      --card: #f3f3f3;
      --text: #222;
      --radius: 12px;
      --gap: 14px;
    }
    body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);transition:background .25s,color .25s}
    header{background:var(--primary);color:#fff;padding:14px 16px;display:flex;align-items:center;gap:12px}
    header img.logo{height:44px}
    header h1{font-size:16px;margin:0}
    .container{max-width:720px;margin:18px auto;padding:16px}
    .welcome{display:flex;flex-direction:column;align-items:center;text-align:center;padding:28px}
    .avatar{width:160px;height:auto;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.12)}
    .btn{display:block;width:100%;padding:14px;border-radius:10px;background:var(--primary);color:#fff;text-decoration:none;text-align:center;font-weight:700;margin-bottom:12px;box-shadow:0 6px 14px rgba(176,0,0,.12)}
    .btn.secondary{background:#333;color:#fff}
    .card{background:var(--card);padding:14px;border-radius:10px;margin-bottom:12px}
    .top-actions{display:flex;gap:10px;justify-content:flex-end;padding:10px}
    .icon-btn{background:#fff;border-radius:10px;padding:8px;cursor:pointer;border:1px solid rgba(0,0,0,.06)}
    h2{margin:8px 0 12px 0;color:var(--primary-dark)}
    small.note{display:block;color:#666;margin-top:6px}

    /* Rotas list */
    .routes{display:grid;grid-template-columns:1fr;gap:10px}
    .route-item{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;background:#fff;border:1px solid rgba(0,0,0,.04)}
    .route-item button{background:transparent;border:0;color:var(--primary);font-weight:700;cursor:pointer}

    /* Modal base */
    .modal-back{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:20px}
    .modal{background:var(--bg);max-width:520px;width:100%;padding:18px;border-radius:12px}
    .modal h3{margin-top:0}
    .close{float:right;background:#eee;padding:6px 8px;border-radius:8px;border:0;cursor:pointer}

    /* Dark */
    body.dark{background:#0e0e10;color:#e8e8e8}
    body.dark .card{background:#121217}
    body.dark .modal{background:#111114}
    body.dark .btn{background:var(--primary-dark)}
    body.dark header{background:var(--primary-dark)}

    /* responsive */
    @media(min-width:800px){
      .routes{grid-template-columns:1fr 1fr}
      .welcome{flex-direction:row;gap:24px;text-align:left}
    }
  </style>
</head>
<body>

<header>
  <img src="logo.png" alt="AC Logo" class="logo" />
  <h1>AC PARCERIA E TERRAPLENAGEM ‚Äî Portal de Transporte</h1>
</header>

<div class="top-actions container" style="justify-content:space-between;gap:10px">
  <div style="display:flex;gap:8px;align-items:center">
    <button class="icon-btn" id="installBtn" style="display:none">üì• Instalar</button>
  </div>
  <div style="display:flex;gap:8px;align-items:center">
    <button class="icon-btn" id="darkToggle" title="Alternar tema">üåô</button>
  </div>
</div>

<main class="container">

  <!-- TELA DE BOAS VINDAS -->
  <section id="welcome" class="welcome" aria-labelledby="welcomeTitle">
    <img src="avatar.png" class="avatar" alt="Avatar AC" />
    <div style="max-width:520px">
      <h2 id="welcomeTitle">Bem-vindo ao Portal de Transporte</h2>
      <p>Controle de rotas, registro de entrada/sa√≠da e avisos oficiais da <strong>AC Parceria e Terraplenagem</strong>.</p>
      <p class="card" style="margin-top:12px">
        ‚è±Ô∏è <strong>Importante:</strong> O formul√°rio de controle de ve√≠culo deve ser preenchido **2√ó ao dia** ‚Äî ao iniciar a jornada (entrada) e ao finalizar (sa√≠da).
      </p>
      <button class="btn" onclick="enterApp()">Entrar no Portal</button>
    </div>
  </section>

  <!-- MENU PRINCIPAL -->
  <section id="mainMenu" style="display:none">
    <h2>Menu</h2>

    <div class="card">
      <a class="btn" href="https://forms.gle/UDniKxPqcMKGUhFQA" target="_blank">üìã Preencher Controle de Ve√≠culo (Entrada / Sa√≠da)</a>
      <small class="note">Use ao iniciar e ao terminar sua jornada. Obrigat√≥rio todos os dias.</small>
    </div>

    <div class="card">
      <a class="btn" onclick="openModal('avisosModal')">üì¢ Avisos & Comunicados</a>
      <small class="note">Leia sempre antes de iniciar a rota.</small>
    </div>

    <div class="card">
      <a class="btn" onclick="openSection('rotasSection')">üó∫Ô∏è Selecionar Rota</a>
      <small class="note">Selecione a rota que ir√° conduzir ‚Äî ao clicar, abre o Google Maps com navega√ß√£o.</small>
    </div>

    <div class="card">
      <a class="btn secondary" onclick="openModal('ajudaModal')">‚ùì Ajuda / Explica√ß√£o dos Bot√µes</a>
      <small class="note">Instru√ß√µes r√°pidas e contatos de suporte.</small>
    </div>
  </section>

  <!-- ROTAS -->
  <section id="rotasSection" style="display:none">
    <h2>Rotas Dispon√≠veis</h2>
    <p>Selecione abaixo a rota que voc√™ ir√° conduzir:</p>

    <div class="routes" style="margin-top:12px">
      <!-- Rota 01 (pronto) -->
      <div class="route-item">
        <div>
          <div style="font-weight:800">Rota 01 ‚Äî (Centro / Base)</div>
          <small style="color:#666">Dura√ß√£o estimada: ‚è±  ‚Äî Paradas: ‚Ä¢ ‚Ä¢ ‚Ä¢</small>
        </div>
        <div>
          <!-- abre exatamente o link que voc√™ me mandou -->
          <a class="btn" href="https://maps.app.goo.gl/Z199k9ygiooHTh3p6" target="_blank" style="padding:8px 12px;border-radius:8px;">Abrir no Maps</a>
        </div>
      </div>

      <!-- Espa√ßo para adicionar outras rotas -->
      <!-- Exemplo:
      <div class="route-item">
        <div><div style="font-weight:800">Rota 02 ‚Äî Bairro X</div><small style="color:#666">...</small></div>
        <div><button onclick="openMapsWithCoords('LAT,LON')">Abrir no Maps</button></div>
      </div>
      -->
    </div>

    <div style="margin-top:18px">
      <button class="btn" onclick="backToMenu()">Voltar</button>
    </div>
  </section>

</main>

<!-- MODAIS -->
<div id="avisosModalBack" class="modal-back" aria-hidden="true" style="display:none">
  <div class="modal">
    <button class="close" onclick="closeModal('avisosModalBack')">‚úï</button>
    <h3>Avisos Importantes</h3>
    <ul>
      <li>Preencher o Controle de Ve√≠culo 2√ó ao dia (entrada e sa√≠da).</li>
      <li>Mantenha comunica√ß√£o constante com a gest√£o em caso de desvios.</li>
      <li>Relatar imediatamente qualquer avaria ou irregularidade do ve√≠culo.</li>
      <li>N√£o alterar rota sem autoriza√ß√£o do setor de opera√ß√µes.</li>
    </ul>
    <div style="margin-top:12px">
      <button class="btn" onclick="closeModal('avisosModalBack')">Fechar</button>
    </div>
  </div>
</div>

<div id="ajudaModalBack" class="modal-back" aria-hidden="true" style="display:none">
  <div class="modal">
    <button class="close" onclick="closeModal('ajudaModalBack')">‚úï</button>
    <h3>Ajuda & Explica√ß√£o dos Bot√µes</h3>
    <p><strong>Preencher Controle de Ve√≠culo:</strong> Abre o formul√°rio obrigat√≥rio (Google Forms). Preencher na entrada e na sa√≠da.</p>
    <p><strong>Selecionar Rota:</strong> Mostra as rotas publicadas pela gest√£o; ao clicar em "Abrir no Maps" o Google Maps ser√° aberto com a rota pronta.</p>
    <p><strong>Avisos:</strong> Comunicados importantes e mudan√ßas operacionais ‚Äî leia sempre antes de iniciar.</p>
    <p><strong>Instalar / Adicionar √† Tela Inicial:</strong> Permite transformar o site em um app no celular do motorista.</p>
    <div style="margin-top:12px"><button class="btn" onclick="closeModal('ajudaModalBack')">Fechar</button></div>
  </div>
</div>

<script>
  // simple UI control
  function enterApp(){
    document.getElementById('welcome').style.display = 'none';
    document.getElementById('mainMenu').style.display = 'block';
    // focus for screen readers
    document.getElementById('mainMenu').scrollIntoView({behavior:'smooth'});
  }
  function openSection(id){
    document.getElementById('mainMenu').style.display = 'none';
    document.getElementById('rotasSection').style.display = 'block';
    window.scrollTo({top:0,behavior:'smooth'});
  }
  function backToMenu(){
    document.getElementById('rotasSection').style.display = 'none';
    document.getElementById('mainMenu').style.display = 'block';
  }

  function openModal(which){
    if(which==='avisosModal') document.getElementById('avisosModalBack').style.display='flex';
    if(which==='ajudaModal') document.getElementById('ajudaModalBack').style.display='flex';
  }
  function closeModal(id){
    document.getElementById(id).style.display='none';
  }

  // Dark toggle
  const darkToggle = document.getElementById('darkToggle');
  darkToggle.addEventListener('click',()=>{
    document.body.classList.toggle('dark');
    localStorage.setItem('ac_dark', document.body.classList.contains('dark') ? '1':'0');
  });
  // persist
  if(localStorage.getItem('ac_dark')==='1') document.body.classList.add('dark');

  // PWA install prompt handling
  let deferredPrompt;
  const installBtn = document.getElementById('installBtn');
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.display = 'inline-block';
  });
  installBtn.addEventListener('click', async ()=>{
    if(!deferredPrompt) return;
    deferredPrompt.prompt();
    const choice = await deferredPrompt.userChoice;
    installBtn.style.display = 'none';
    deferredPrompt = null;
  });

  // helper (optional): open maps with coordinates or query
  function openMapsWithCoords(q){
    // q can be a place name or "lat,lon"
    const url = 'https://www.google.com/maps/search/?api=1&query='+encodeURIComponent(q);
    window.open(url,'_blank');
  }
</script>

</body>
</html>
